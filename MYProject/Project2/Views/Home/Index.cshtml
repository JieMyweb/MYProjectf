@model IEnumerable<Project2.Models.tProduct>

@{
    ViewData["Title"] = "產品列表";
}


<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <img src="~/img/商城主頁.jpg" class="img-fluid" alt="" style="width:100%; height:900px; object-fit:cover; border-radius:10px;">
            <div style="position:absolute; top:450px; left:50%; transform:translate(-50%, -50%); color:white;">
                <p style="margin-bottom: 20px; font-size: calc(20px + 0.390625vw);white-space:nowrap;font-weight: 900;">shop，不只是購物，更是一種生活態度</p>
                <p style="margin-bottom: 20px; font-size: calc(20px + 0.390625vw);white-space:nowrap;font-weight: 900;">我們提供優質的服務，讓您享受方便和快樂</p>
                <p style="margin-bottom: 20px; font-size: calc(20px + 0.390625vw);white-space:nowrap;font-weight: 900;">shop，讓您和自然共享美好</p>

            </div>
        </div>
    </div>
</div>


<div class="container" style="margin-top:100px;margin-bottom:100px;">
    <h1 class="text-center" style="margin-top:20px;">你要的東西都在這裡</h1>
    <h6 class="text-center" style="margin-top:20px;">我們深知您的購物體驗對我們而言至關重要。<br />因此，我們一直致力於提供最佳的購物服務，以確保您在每一次的交易中都感到滿意和愉快。</h6>
</div>


<div class="container">
    <div class="row justify-content-center text-center" style="margin-top:20px;">
        @foreach (var item in Model)
        {
            <div class="col-md-4">
                <div class="card">
                    <img src="~/img/@item.fImg" class="card-img-top img-fluid mx-auto" alt="@item.fName" style="max-width: 200px;">
                    <div class="card-body">
                        <h5 class="card-title">@item.fName</h5>
                        <p class="card-text">單價：@item.fPrice</p>
                        <a href="@Url.Action("AddCar", "Member")?fPId=@item.fPId" class="btn btn-warning" onclick="return AddToCart(this)">加入購物車</a>
                        <a href="@Url.Action("ProductDetail", "Home")?fId=@item.fId" class="btn btn-secondary">產品資訊</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>



<div class="container-fluid" style="margin-top:100px; position: relative;">
    <div class="row">
        <div class="col-md-12">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; width: 100%;">
                <p style="color: white; font-weight:bold; font-size:50px;">加入會員購買您想要的商品</p>
            </div>
            <img src="~/img/底部主頁.jpg" class="img-fluid" alt="" style="width:100%; height:300px; object-fit:cover; border-radius:20px;">
        </div>
    </div>
</div>




<div class="container-fluid" style="margin: auto; text-align: center; margin-top:20px;margin-bottom:20px;">
@await Component.InvokeAsync("PDViewComponents")
</div>



<script>
    // 定義加入購物車的函數
    function AddToCart(element) {
        // 檢查使用者是否已登入
        var isAuthenticated = @User.Identity.IsAuthenticated.ToString().ToLower();

        if (!isAuthenticated) {
            // 使用者未登入，導向登入頁面
            window.location.href = "/Home/Login";
            return false; // 阻止進一步執行
        }

        // 使用者已登入，執行加入購物車的邏輯
        // 呼叫 toastr 的方法
        ShowMessage();
        // 執行加入購物車的 AJAX 邏輯
        var url = element.href;
        $.ajax({
            type: "GET",
            url: url,
            success: function (data) {
                // 更新購物車的數量或其他操作
            },
            error: function (error) {
                // 處理錯誤或其他操作
            }
        });
        // 回傳 false
        return false;
    }
</script>